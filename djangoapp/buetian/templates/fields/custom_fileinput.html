<div class="form-group">
    <label for="avatar" class="form-label">Photo</label>
    <div>
        <div class="media align-items-center">
            <div class="media-left">
              <div>
                {% if field.value %}
                    <img id="id_{{ field.name }}_preview" src="{{ field.value.url }}" width="200" height="200" />
                {% else %}
                    <img id="id_{{ field.name }}_preview" src="http://placehold.it/200x200" width="200" height="200" />
                {% endif %}
              </div>
              <div>
                  {% if field.value %}
                    <a id="id_{{ field.name }}_change" href="javascript:void(0)">Change</a>
                  {% else %} 
                    <a id="id_{{ field.name }}_change" href="javascript:void(0)">Upload</a>
                  {% endif %}
              </div>
            </div>
            <div class="media-body">
                <div class="custom-file" style="width: auto;">
                    <input type="file" name="image" id="id_image" class="custom-file-input" style="display:none" >
                </div>
            </div>
            <script type="text/javascript" id="script-{{ field.id_for_label }}">        
              document.getElementById("script-{{ field.id_for_label }}").parentNode.querySelector('#id_{{ field.name }}_change').onclick = function(e) {
                document.getElementById("script-{{ field.id_for_label }}").parentNode.querySelector('.custom-file-input').click();
              }

              document.getElementById("script-{{ field.id_for_label }}").parentNode.querySelector('.custom-file-input').onchange =  function (e) {
                  if (e.target.files && e.target.files[0]) {
                      var reader = new FileReader();
                      
                      reader.onload = function (e2) {
                          document.getElementById("script-{{ field.id_for_label }}").parentNode.querySelector('#id_{{ field.name }}_preview').src = e2.target.result;
                      }
                      reader.readAsDataURL(e.target.files[0]);
                  }
                }        
            </script>
        </div>
    </div>
</div>
